
exports.make = function(s){
	
	var syncHandles = {};
	
	var currentHandle;
	
	return {
		makeObject: function(typeCode, obj, cb){
			s.make(typeCode, obj, cb);
		},
		getObject: function(typeCode, id, cb){
			s.get(typeCode, id, cb);
		},
		
		makeSyncHandle: function(typeCode, id, cb){
			s.makeSyncHandle(typeCode, id, function(sh){
				syncHandles[sh.id] = sh;
				cb(sh.id);
			});
		},
		setSyncHandle: function(shId){
			currentHandle = syncHandles[shId];//TODO sync handle currently selected should be logged into append log!
		},
		descendSyncPath: function(path){
			currentHandle.descend(path);
		},
		ascendSyncPath: function(manySteps){
			currentHandle.ascend(manySteps);
		},
		setString: function(str){
			currentHandle.setString(str);
		},
		setTimestamp: function(v){
			currentHandle.setTimestamp(v);
		},
		close: s.close
	};
}
